/**
 * Created by asus on 2017/6/2.
 */
var mysql=require('mysql');
var uuid=require("node-uuid");
function createServer(){
    var client= mysql.createConnection({
        host:"localhost",
        user:"root",
        password:"root",
        database:"shopping"
    })
    return client;
}
function dengLu(client,user,callback){
    client.query("SELECT COUNT(*) shu FROM USER u WHERE u.user_name=? AND u.user_pass=?",[user.username,user.userpass],function (err,result) {
        callback(result[0].shu);
    })
}
function selectUser(client,callback) {
    client.query("SELECT user_id, user_name, user_pass, user_age, user_sex, user_email, user_tel, user_card, user_photo FROM USER",function (err,result) {        
        callback(result);
    })
}
function insertUser(client,user,cclj,callback){
    client.query("INSERT INTO USER (user_id, user_name, user_pass, user_age, user_sex, user_email, user_tel, user_card, user_photo) VALUES (?,?,?,?,?,?,?,?,?)",
    [uuid.v4(),user.userName[0],user.password[0],user.userAge[0],user.userSex[0],user.userEmail[0],user.userPhone[0],user.userId[0],cclj],function (err,result) {
            callback(result.affectedRows);
        })
}
exports.createServer=createServer;
exports.dengLu=dengLu;
exports.selectUser=selectUser;
exports.insertUser=insertUser;